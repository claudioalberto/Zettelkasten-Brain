/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });
var __export = (target, all) => {
  __markAsModule(target);
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __reExport = (target, module2, desc) => {
  if (module2 && typeof module2 === "object" || typeof module2 === "function") {
    for (let key of __getOwnPropNames(module2))
      if (!__hasOwnProp.call(target, key) && key !== "default")
        __defProp(target, key, { get: () => module2[key], enumerable: !(desc = __getOwnPropDesc(module2, key)) || desc.enumerable });
  }
  return target;
};
var __toModule = (module2) => {
  return __reExport(__markAsModule(__defProp(module2 != null ? __create(__getProtoOf(module2)) : {}, "default", module2 && module2.__esModule && "default" in module2 ? { get: () => module2.default, enumerable: true } : { value: module2, enumerable: true })), module2);
};
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};

// src/main.ts
__export(exports, {
  default: () => BibleLinkerPlugin
});
var import_obsidian5 = __toModule(require("obsidian"));

// src/modals/copy-verse-modal.ts
var import_obsidian3 = __toModule(require("obsidian"));

// src/utils/convert-link.ts
var import_obsidian2 = __toModule(require("obsidian"));

// src/utils/regexes.ts
var oneVerseRegEx = new RegExp(/([^,:#]+)[,#.:;]\s*(\d+)\s*$/);
var multipleVersesRegEx = new RegExp(/([^,:#]+)[,#.:;]\s*(\d+)\s*[-.=]\s*(\d+)\s*$/);
var bookAndChapterRegexForOBSK = /([^,:#]+)\s(\d+)/;
var multipleChapters = /(\d*[^\d,:#]+)\s*(\d+)\s*-\s*(\d+)\s*$/;

// src/modals/link-verse-modal.ts
var import_obsidian = __toModule(require("obsidian"));
var LinkType;
(function(LinkType2) {
  LinkType2["Basic"] = "Basic";
  LinkType2["Embedded"] = "Embedded";
  LinkType2["Invisible"] = "Invisible";
})(LinkType || (LinkType = {}));
var LinkVerseModal = class extends import_obsidian.Modal {
  constructor(app, settings, onSubmit) {
    super(app);
    this.handleInput = () => __async(this, null, function* () {
      try {
        const res = yield getLinks(this.app, this.userInput, this.linkType, this.useNewLine, this.pluginSettings);
        this.close();
        this.onSubmit(res);
      } catch (err) {
        return;
      }
    });
    this.onSubmit = onSubmit;
    this.pluginSettings = settings;
    this.linkType = this.pluginSettings.linkTypePreset;
    this.useNewLine = this.pluginSettings.newLinePreset;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h3", { text: "Create Obsidian links from Bible reference" });
    new import_obsidian.Setting(contentEl).setName("Insert reference").addText((text) => text.onChange((value) => {
      this.userInput = value;
    }).inputEl.focus());
    new import_obsidian.Setting(contentEl).setName("Link type").addDropdown((dropdown) => {
      dropdown.addOption(LinkType.Basic, LinkType.Basic);
      dropdown.addOption(LinkType.Embedded, LinkType.Embedded);
      dropdown.addOption(LinkType.Invisible, LinkType.Invisible);
      dropdown.onChange((value) => this.linkType = value);
      dropdown.setValue(this.pluginSettings.linkTypePreset);
    });
    new import_obsidian.Setting(contentEl).setName("Each link on new line?").addToggle((tgl) => {
      tgl.setValue(this.pluginSettings.newLinePreset);
      tgl.onChange((val) => this.useNewLine = val);
    });
    new import_obsidian.Setting(contentEl).addButton((btn) => {
      btn.setButtonText("Link").setCta().onClick(this.handleInput);
    });
    contentEl.onkeydown = (event) => {
      if (event.key === "Enter") {
        event.preventDefault();
        this.handleInput();
      }
    };
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/utils/convert-link.ts
function getLinks(app, userInput, linkType, useNewLine, settings) {
  return __async(this, null, function* () {
    if (multipleChapters.test(userInput)) {
      return getLinksForBooks(app, userInput, linkType, useNewLine, settings);
    } else {
      return getLinksForVerses(app, userInput, linkType, useNewLine, settings);
    }
  });
}
function getLinksForVerses(app, userInput, linkType, useNewLine, settings) {
  return __async(this, null, function* () {
    let { bookAndChapter, beginVerse, endVerse } = parseUserVerseInput(userInput);
    bookAndChapter = capitalize(bookAndChapter);
    if (settings.verifyFilesWhenLinking) {
      const { fileName, tFile } = getFileFromBookAndChapter(app, bookAndChapter);
      if (!tFile) {
        new import_obsidian2.Notice(`File "${fileName}" does not exist and verify files is set to true`);
        throw `File ${fileName} does not exist, verify files = true`;
      }
    }
    if (beginVerse > endVerse) {
      new import_obsidian2.Notice("Begin verse is bigger than end verse");
      throw "Begin verse is bigger than end verse";
    }
    let res = "";
    const beginning = linkType === LinkType.Embedded ? "!" : "";
    const ending = linkType === LinkType.Invisible ? "|" : "";
    for (let i = beginVerse; i <= endVerse; i++) {
      res += `${beginning}[[${bookAndChapter}${settings.linkSeparator}${settings.versePrefix}${i}${ending}]]`;
      if (useNewLine) {
        res += "\n";
      }
    }
    return res;
  });
}
function getLinksForBooks(app, userInput, linkType, useNewLine, settings) {
  return __async(this, null, function* () {
    const { book, firstChapter, lastChapter } = parseUserBookInput(userInput);
    if (firstChapter > lastChapter) {
      new import_obsidian2.Notice("Begin chapter is bigger than end chapter");
      throw "Begin chapter is bigger than end chapter";
    }
    let res = "";
    for (let i = firstChapter; i <= lastChapter; i++) {
      res += `[[${book} ${i}]]`;
      if (useNewLine) {
        res += "\n";
      }
    }
    return res;
  });
}
function getTextOfVerses(app, userInput, settings, verbose = true) {
  return __async(this, null, function* () {
    let { bookAndChapter, beginVerse, endVerse } = parseUserVerseInput(userInput, verbose);
    bookAndChapter = capitalize(bookAndChapter);
    const { fileName, tFile } = getFileFromBookAndChapter(app, bookAndChapter);
    if (tFile) {
      return yield createCopyOutput(app, tFile, bookAndChapter, fileName, beginVerse, endVerse, settings, verbose);
    } else {
      if (verbose) {
        new import_obsidian2.Notice(`File ${bookAndChapter} not found`);
      }
      throw "File not found";
    }
  });
}
function getFileFromBookAndChapter(app, bookAndChapter) {
  let fileName = bookAndChapter;
  let tFile = app.metadataCache.getFirstLinkpathDest(fileName, "/");
  if (!tFile) {
    fileName = tryConvertToOBSKFileName(fileName);
    tFile = app.metadataCache.getFirstLinkpathDest(fileName, "/");
  }
  return { fileName, tFile };
}
function parseUserVerseInput(userInput, verbose = true) {
  let bookAndChapter;
  let beginVerse;
  let endVerse;
  switch (true) {
    case oneVerseRegEx.test(userInput): {
      const [, matchedChapter, matchedVerse] = userInput.match(oneVerseRegEx);
      bookAndChapter = matchedChapter;
      beginVerse = Number(matchedVerse);
      endVerse = Number(matchedVerse);
      break;
    }
    case multipleVersesRegEx.test(userInput): {
      const [, matchedChapter, matchedBeginVerse, matchedEndVerse] = userInput.match(multipleVersesRegEx);
      bookAndChapter = matchedChapter;
      beginVerse = Number(matchedBeginVerse);
      endVerse = Number(matchedEndVerse);
      break;
    }
    default: {
      if (verbose) {
        new import_obsidian2.Notice(`Wrong format "${userInput}"`);
      }
      throw "Could not parse user input";
    }
  }
  return { bookAndChapter, beginVerse, endVerse };
}
function parseUserBookInput(userInput) {
  let book;
  let firstChapter;
  let lastChapter;
  switch (true) {
    case multipleChapters.test(userInput): {
      const [, matchedBook, matchedFirstChapter, matchedLastChapter] = userInput.match(multipleChapters);
      book = matchedBook.trim();
      firstChapter = Number(matchedFirstChapter);
      lastChapter = Number(matchedLastChapter);
      break;
    }
    default: {
      new import_obsidian2.Notice(`Wrong format "${userInput}"`);
      throw "Could not parse user input";
    }
  }
  return { book, firstChapter, lastChapter };
}
function capitalize(str) {
  str = str.toLocaleLowerCase();
  for (let i = 0; i < str.length; i++) {
    if (/[^\s\d.,#-]/.test(str.charAt(i))) {
      return str.slice(0, i) + str.charAt(i).toUpperCase() + str.slice(i + 1);
    }
  }
  return str;
}
function getVerseText(verseNumber, headings, lines, keepNewlines, newLinePrefix) {
  if (verseNumber >= headings.length) {
    new import_obsidian2.Notice("Verse out of range for given file");
    throw `VerseNumber ${verseNumber} is out of range of headings with length ${headings.length}`;
  }
  const headingLine = headings[verseNumber].position.start.line;
  if (headingLine + 1 >= lines.length) {
    new import_obsidian2.Notice("Logical error - please create issue on plugin's GitHub with your input and the file you were referencing. Thank you!");
    throw `HeadingLine ${headingLine + 1} is out of range of lines with length ${lines}`;
  }
  let output = "";
  let line = "";
  let i = 1;
  let isFirst = true;
  while (true) {
    line = lines[headingLine + i];
    if (/#/.test(line) || !line && !isFirst) {
      break;
    }
    i++;
    if (line) {
      if (!isFirst) {
        output += keepNewlines ? `
${newLinePrefix}` : " ";
      }
      isFirst = false;
      output += line;
    }
  }
  return output;
}
function tryConvertToOBSKFileName(bookAndChapter) {
  if (bookAndChapterRegexForOBSK.test(bookAndChapter)) {
    let [, book, number] = bookAndChapter.match(bookAndChapterRegexForOBSK);
    if (number.length == 1) {
      number = `0${number}`;
    }
    return `${book}-${number}`;
  }
}
function replaceNewline(input) {
  return input.replace(/\\n/g, "\n");
}
function createCopyOutput(app, tFile, userChapterInput, fileName, beginVerse, endVerse, settings, verbose) {
  return __async(this, null, function* () {
    const file = app.vault.read(tFile);
    const lines = (yield file).split(/\r?\n/);
    const verseHeadingLevel = settings.verseHeadingLevel;
    const headings = app.metadataCache.getFileCache(tFile).headings.filter((heading) => !verseHeadingLevel || heading.level === verseHeadingLevel);
    const beginVerseNoOffset = beginVerse;
    const endVerseNoOffset = endVerse;
    beginVerse += settings.verseOffset;
    endVerse += settings.verseOffset;
    if (beginVerse > endVerse) {
      if (verbose) {
        new import_obsidian2.Notice("Begin verse is bigger than end verse");
      }
      throw "Begin verse is bigger than end verse";
    }
    if (headings.length <= beginVerse) {
      if (verbose) {
        new import_obsidian2.Notice("Begin verse out of range of chapter");
      }
      throw "Begin verse out of range of chapter";
    }
    let res = settings.prefix;
    const postfix = settings.postfix ? replaceNewline(settings.postfix) : " ";
    if (beginVerse === endVerse) {
      res += `[[${fileName}#${headings[beginVerse].heading}|${userChapterInput}${settings.oneVerseNotation}${beginVerseNoOffset}]]${postfix}`;
    } else if (settings.linkEndVerse) {
      res += `[[${fileName}#${headings[beginVerse].heading}|${userChapterInput}${settings.multipleVersesNotation}${beginVerseNoOffset}-]]`;
      res += `[[${fileName}#${headings[endVerse].heading}|${endVerseNoOffset}]]${postfix}`;
    } else {
      res += `[[${fileName}#${headings[beginVerse].heading}|${userChapterInput}${settings.multipleVersesNotation}${beginVerseNoOffset}-${endVerseNoOffset}]]${postfix}`;
    }
    for (let i = beginVerse; i <= endVerse; i++) {
      let versePrefix = "";
      let versePostfix = settings.insertSpace ? " " : "";
      if (settings.eachVersePrefix) {
        versePrefix += settings.eachVersePrefix.replace(/{n}/g, (i - settings.verseOffset).toString());
        versePrefix = versePrefix.replace(/{f}/g, `${fileName}`);
      }
      const verseText = getVerseText(i, headings, lines, settings.newLines, settings.prefix);
      if (settings.newLines) {
        res += "\n" + settings.prefix + versePrefix + verseText;
      } else {
        res += versePrefix + verseText + versePostfix;
      }
    }
    if (beginVerse == endVerse || !settings.useInvisibleLinks)
      return res;
    if (settings.newLines) {
      res += `
${settings.prefix}`;
    }
    for (let i = beginVerse; i <= endVerse; i++) {
      res += `[[${fileName}#${headings[i].heading}|]]`;
    }
    return res;
  });
}

// src/modals/copy-verse-modal.ts
function setPreviewText(previewEl, userInput, pluginSettings) {
  return __async(this, null, function* () {
    try {
      const res = yield getTextOfVerses(this.app, userInput, pluginSettings, false);
      previewEl.setText(res);
    } catch (e) {
      return;
    }
  });
}
var CopyVerseModal = class extends import_obsidian3.Modal {
  constructor(app, settings, onSubmit) {
    super(app);
    this.handleInput = () => __async(this, null, function* () {
      try {
        const res = yield getTextOfVerses(this.app, this.userInput, this.pluginSettings);
        this.close();
        this.onSubmit(res);
      } catch (err) {
        return;
      }
    });
    this.onSubmit = onSubmit;
    this.pluginSettings = settings;
  }
  onOpen() {
    const { contentEl } = this;
    let previewEl;
    contentEl.createEl("h3", { text: "Copy verse by bible reference" });
    new import_obsidian3.Setting(contentEl).setName("Insert reference").addText((text) => text.onChange((value) => {
      this.userInput = value;
      setPreviewText(previewEl, this.userInput, this.pluginSettings);
    }).inputEl.focus());
    contentEl.createEl("label", { text: "Preview" });
    previewEl = contentEl.createEl("textarea", { cls: "copy-preview", attr: { readonly: true } });
    new import_obsidian3.Setting(contentEl).addButton((btn) => {
      btn.setButtonText("Link").setCta().onClick(this.handleInput);
    });
    contentEl.onkeydown = (event) => {
      if (event.key === "Enter") {
        event.preventDefault();
        this.handleInput();
      }
    };
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/settings.ts
var import_obsidian4 = __toModule(require("obsidian"));
var SettingsTab = class extends import_obsidian4.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian4.Setting(containerEl).setHeading().setName("Copy bible verses settings");
    new import_obsidian4.Setting(containerEl).setName("Verse offset").setDesc('Change this if wrong verses are being linked, e.g. you want "Gen 1,1-3" but output is text from verses 2-4 \u2192 set this to -1').addText((inputBox) => inputBox.setValue(this.plugin.settings.verseOffset.toString()).onChange((value) => __async(this, null, function* () {
      const number = Number.parseInt(value);
      if (value === "-")
        return;
      if (Number.isNaN(number)) {
        new import_obsidian4.Notice("Invalid input, please insert valid integer");
        inputBox.setValue("");
        return;
      }
      this.plugin.settings.verseOffset = number;
      yield this.plugin.saveSettings();
    })));
    new import_obsidian4.Setting(containerEl).setName("Verse heading level").setDesc('If set, only headings of specified level are considered verses (if first heading of this level is always a verse, also set "Verse offset" to -1)').addDropdown((dropdown) => {
      var _a, _b;
      dropdown.addOption("any", "any");
      dropdown.addOption("6", "######");
      dropdown.addOption("5", "#####");
      dropdown.addOption("4", "####");
      dropdown.addOption("3", "###");
      dropdown.addOption("2", "##");
      dropdown.addOption("1", "#");
      dropdown.setValue((_b = (_a = this.plugin.settings.verseHeadingLevel) == null ? void 0 : _a.toString()) != null ? _b : "any");
      dropdown.onChange((value) => __async(this, null, function* () {
        this.plugin.settings.verseHeadingLevel = value === "any" ? void 0 : Number(value);
        yield this.plugin.saveSettings();
      }));
    });
    new import_obsidian4.Setting(containerEl).setName("Line prefix").setDesc("String inserted in front of every line, for example '>' for quote. Note: If you set 'Put each verse on a new line?' to true, the prefix will be inserted in front of every line.").addText((inputBox) => inputBox.setPlaceholder("Insert prefix here").setValue(this.plugin.settings.prefix).onChange((value) => __async(this, null, function* () {
      this.plugin.settings.prefix = value;
      yield this.plugin.saveSettings();
    })));
    new import_obsidian4.Setting(containerEl).setName("Link postfix").setDesc("String inserted after biblical link, you can use \\n to insert newline.").addText((inputBox) => inputBox.setPlaceholder("Insert postfix here").setValue(this.plugin.settings.postfix).onChange((value) => __async(this, null, function* () {
      this.plugin.settings.postfix = value;
      yield this.plugin.saveSettings();
    })));
    new import_obsidian4.Setting(containerEl).setName("Each verse prefix").setDesc('String inserted in front of every copied verse. You can use "{n}" where you want number of given verse inserted, for example "**{n}** " will make each verse start with bold verse number. You can also use "{f}" to insert name of the corresponding file (for example to create obsidian links). Leave empty for no prefix.').addText((inputBox) => inputBox.setPlaceholder("Insert prefix here").setValue(this.plugin.settings.eachVersePrefix).onChange((value) => __async(this, null, function* () {
      this.plugin.settings.eachVersePrefix = value;
      yield this.plugin.saveSettings();
    })));
    new import_obsidian4.Setting(containerEl).setName("Link to last verse?").setDesc("Should last verse be linked in the visible link before text of verses?").addToggle((toggle) => toggle.setValue(this.plugin.settings.linkEndVerse).onChange((value) => __async(this, null, function* () {
      this.plugin.settings.linkEndVerse = value;
      yield this.plugin.saveSettings();
    })));
    new import_obsidian4.Setting(containerEl).setName("Add invisible links?").setDesc("Invisible links are added to each verse used (so you can find the connections later), they are only visible in source mode.").addToggle((toggle) => toggle.setValue(this.plugin.settings.useInvisibleLinks).onChange((value) => __async(this, null, function* () {
      this.plugin.settings.useInvisibleLinks = value;
      yield this.plugin.saveSettings();
    })));
    new import_obsidian4.Setting(containerEl).setName("Put each verse on a new line?").setDesc("Each verse is inserted on a new line (with Link prefix).").addToggle((toggle) => toggle.setValue(this.plugin.settings.newLines).onChange((value) => __async(this, null, function* () {
      this.plugin.settings.newLines = value;
      yield this.plugin.saveSettings();
    })));
    new import_obsidian4.Setting(containerEl).setName("One verse notation").setDesc('This is the symbol that will be used between chapter number and verse number when copying one verse. For example "." \u2192 Gen 1.1.').addText((inputBox) => inputBox.setPlaceholder("Insert notation symbol here").setValue(this.plugin.settings.oneVerseNotation).onChange((value) => __async(this, null, function* () {
      this.plugin.settings.oneVerseNotation = value;
      yield this.plugin.saveSettings();
    })));
    new import_obsidian4.Setting(containerEl).setName("Multiple verses notation").setDesc('This is the symbol that will be used between chapter number and verse number when copying multiple verses. For example "," \u2192 Gen 1,1-3.').addText((inputBox) => inputBox.setPlaceholder("Insert notation symbol here").setValue(this.plugin.settings.multipleVersesNotation).onChange((value) => __async(this, null, function* () {
      this.plugin.settings.multipleVersesNotation = value;
      yield this.plugin.saveSettings();
    })));
    new import_obsidian4.Setting(containerEl).setName("Insert space between verses?").setDesc("Should space be inserted between verses? (Only applied when Put each verse on a new line? is se to false. Useful for languages such as Chinese.)").setDisabled(!this.plugin.settings.newLines).addToggle((toggle) => toggle.setValue(this.plugin.settings.insertSpace).onChange((value) => __async(this, null, function* () {
      this.plugin.settings.insertSpace = value;
      yield this.plugin.saveSettings();
    })));
    new import_obsidian4.Setting(containerEl).setHeading().setName("Create obsidian links to bible verses settings");
    new import_obsidian4.Setting(containerEl).setName("Link separator").setDesc("This is the separator that will be used when linking, e.g. if you enter '#' here, output will be [[Gen 1#1]]. If you are using headings to mark verses, use '#'. If you are using block references, use '^'.").addText((inputBox) => inputBox.setPlaceholder("Insert separator here").setValue(this.plugin.settings.linkSeparator).onChange((value) => __async(this, null, function* () {
      this.plugin.settings.linkSeparator = value;
      yield this.plugin.saveSettings();
    })));
    new import_obsidian4.Setting(containerEl).setName("Verify files?").setDesc("Verify existence of files you are trying to link, so that you are not inserting wrong references by mistake.").addToggle((toggle) => toggle.setValue(this.plugin.settings.verifyFilesWhenLinking).onChange((value) => __async(this, null, function* () {
      this.plugin.settings.verifyFilesWhenLinking = value;
      yield this.plugin.saveSettings();
    })));
    new import_obsidian4.Setting(containerEl).setName("Verse prefix").setDesc('Fill this if you are using verse prefixes in your bible files, e.g. you have "v1" in your file \u2192 set to "v".').addText((inputBox) => inputBox.setPlaceholder("Insert prefix here").setValue(this.plugin.settings.versePrefix).onChange((value) => __async(this, null, function* () {
      this.plugin.settings.versePrefix = value;
      yield this.plugin.saveSettings();
    })));
    new import_obsidian4.Setting(containerEl).setName("Link type default value").setDesc("Value that will be selected by default in link modal.").addDropdown((dropdown) => {
      dropdown.addOption(LinkType.Basic, LinkType.Basic);
      dropdown.addOption(LinkType.Embedded, LinkType.Embedded);
      dropdown.addOption(LinkType.Invisible, LinkType.Invisible);
      dropdown.setValue(this.plugin.settings.linkTypePreset);
      dropdown.onChange((value) => __async(this, null, function* () {
        this.plugin.settings.linkTypePreset = value;
        yield this.plugin.saveSettings();
      }));
    });
    new import_obsidian4.Setting(containerEl).setName("Use new lines default value").setDesc("Value that will be selected by default in link modal.").addToggle((toggle) => toggle.setValue(this.plugin.settings.newLinePreset).onChange((value) => __async(this, null, function* () {
      this.plugin.settings.newLinePreset = value;
      yield this.plugin.saveSettings();
    })));
  }
};

// src/main.ts
var DEFAULT_SETTINGS = {
  prefix: "",
  postfix: "",
  linkEndVerse: false,
  verseOffset: 0,
  verseHeadingLevel: void 0,
  useInvisibleLinks: true,
  newLines: false,
  eachVersePrefix: "",
  oneVerseNotation: ".",
  multipleVersesNotation: ",",
  insertSpace: true,
  verifyFilesWhenLinking: false,
  versePrefix: "",
  linkTypePreset: LinkType.Basic,
  newLinePreset: true,
  linkSeparator: "#"
};
var BibleLinkerPlugin = class extends import_obsidian5.Plugin {
  constructor() {
    super(...arguments);
    this.openCopyModal = () => {
      const view = this.app.workspace.getActiveViewOfType(import_obsidian5.MarkdownView);
      if (view) {
        new CopyVerseModal(this.app, this.settings, (str) => view.editor.replaceRange(str, view.editor.getCursor())).open();
      }
    };
    this.openObsidianLinkModal = () => {
      const view = this.app.workspace.getActiveViewOfType(import_obsidian5.MarkdownView);
      if (view) {
        new LinkVerseModal(this.app, this.settings, (str) => view.editor.replaceRange(str, view.editor.getCursor())).open();
      }
    };
  }
  loadSettings() {
    return __async(this, null, function* () {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
    });
  }
  saveSettings() {
    return __async(this, null, function* () {
      yield this.saveData(this.settings);
    });
  }
  onload() {
    return __async(this, null, function* () {
      yield this.loadSettings();
      this.addSettingTab(new SettingsTab(this.app, this));
      this.addCommand({
        id: "insert-bible-link",
        name: "Copy Bible verses",
        editorCallback: this.openCopyModal
      });
      this.addCommand({
        id: "insert-bible-link-obsidian-link",
        name: "Create Obsidian links to Bible verses",
        editorCallback: this.openObsidianLinkModal
      });
    });
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL21vZGFscy9jb3B5LXZlcnNlLW1vZGFsLnRzIiwgInNyYy91dGlscy9jb252ZXJ0LWxpbmsudHMiLCAic3JjL3V0aWxzL3JlZ2V4ZXMudHMiLCAic3JjL21vZGFscy9saW5rLXZlcnNlLW1vZGFsLnRzIiwgInNyYy9zZXR0aW5ncy50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgTWFya2Rvd25WaWV3LCBQbHVnaW4gfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCBDb3B5VmVyc2VNb2RhbCBmcm9tICdzcmMvbW9kYWxzL2NvcHktdmVyc2UtbW9kYWwnO1xyXG5pbXBvcnQgTGlua1ZlcnNlTW9kYWwsIHsgTGlua1R5cGUgfSBmcm9tICcuL21vZGFscy9saW5rLXZlcnNlLW1vZGFsJztcclxuaW1wb3J0IHsgU2V0dGluZ3NUYWIgfSBmcm9tICcuL3NldHRpbmdzJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUGx1Z2luU2V0dGluZ3Mge1xyXG4gIC8vIENvcHlcclxuICBwcmVmaXg6IHN0cmluZztcclxuICBwb3N0Zml4OiBzdHJpbmc7XHJcbiAgbGlua0VuZFZlcnNlOiBib29sZWFuO1xyXG4gIHZlcnNlT2Zmc2V0OiBudW1iZXI7XHJcbiAgdmVyc2VIZWFkaW5nTGV2ZWw/OiBudW1iZXI7XHJcbiAgdXNlSW52aXNpYmxlTGlua3M6IGJvb2xlYW47XHJcbiAgbmV3TGluZXM6IGJvb2xlYW47XHJcbiAgZWFjaFZlcnNlUHJlZml4OiBzdHJpbmc7XHJcbiAgb25lVmVyc2VOb3RhdGlvbjogc3RyaW5nLFxyXG4gIG11bHRpcGxlVmVyc2VzTm90YXRpb246IHN0cmluZztcclxuICBpbnNlcnRTcGFjZTogYm9vbGVhbjtcclxuXHJcbiAgLy8gTGlua1xyXG4gIHZlcmlmeUZpbGVzV2hlbkxpbmtpbmc6IGJvb2xlYW47XHJcbiAgdmVyc2VQcmVmaXg6IHN0cmluZztcclxuICBsaW5rVHlwZVByZXNldDogTGlua1R5cGU7XHJcbiAgbmV3TGluZVByZXNldDogYm9vbGVhbjtcclxuICBsaW5rU2VwYXJhdG9yOiBzdHJpbmc7XHJcbn1cclxuXHJcbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IFBhcnRpYWw8UGx1Z2luU2V0dGluZ3M+ID0ge1xyXG4gIC8vIENvcHlcclxuICBwcmVmaXg6IFwiXCIsXHJcbiAgcG9zdGZpeDogXCJcIixcclxuICBsaW5rRW5kVmVyc2U6IGZhbHNlLFxyXG4gIHZlcnNlT2Zmc2V0OiAwLFxyXG4gIHZlcnNlSGVhZGluZ0xldmVsOiB1bmRlZmluZWQsXHJcbiAgdXNlSW52aXNpYmxlTGlua3M6IHRydWUsXHJcbiAgbmV3TGluZXM6IGZhbHNlLFxyXG4gIGVhY2hWZXJzZVByZWZpeDogXCJcIixcclxuICBvbmVWZXJzZU5vdGF0aW9uOiBcIi5cIixcclxuICBtdWx0aXBsZVZlcnNlc05vdGF0aW9uOiBcIixcIixcclxuICBpbnNlcnRTcGFjZTogdHJ1ZSxcclxuXHJcbiAgLy8gTGlua1xyXG4gIHZlcmlmeUZpbGVzV2hlbkxpbmtpbmc6IGZhbHNlLFxyXG4gIHZlcnNlUHJlZml4OiBcIlwiLFxyXG4gIGxpbmtUeXBlUHJlc2V0OiBMaW5rVHlwZS5CYXNpYyxcclxuICBuZXdMaW5lUHJlc2V0OiB0cnVlLFxyXG4gIGxpbmtTZXBhcmF0b3I6IFwiI1wiXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJpYmxlTGlua2VyUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcclxuICBzZXR0aW5nczogUGx1Z2luU2V0dGluZ3M7XHJcblxyXG4gIC8vIE9wZW5zIG1vZGFsIGZvciB0ZXh0IGNvcHlpbmdcclxuICBvcGVuQ29weU1vZGFsID0gKCkgPT4ge1xyXG4gICAgY29uc3QgdmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XHJcbiAgICBpZiAodmlldykge1xyXG4gICAgICBuZXcgQ29weVZlcnNlTW9kYWwodGhpcy5hcHAsIHRoaXMuc2V0dGluZ3MsXHJcbiAgICAgICAgKHN0cikgPT4gdmlldy5lZGl0b3IucmVwbGFjZVJhbmdlKHN0ciwgdmlldy5lZGl0b3IuZ2V0Q3Vyc29yKCkpKS5vcGVuKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBPcGVucyBtb2RhbCBmb3IgY3JlYXRpbmcgb2JzaWRpYW4gbGlua3NcclxuICBvcGVuT2JzaWRpYW5MaW5rTW9kYWwgPSAoKSA9PiB7XHJcbiAgICBjb25zdCB2aWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcclxuICAgIGlmICh2aWV3KSB7XHJcbiAgICAgIG5ldyBMaW5rVmVyc2VNb2RhbCh0aGlzLmFwcCwgdGhpcy5zZXR0aW5ncyxcclxuICAgICAgICAoc3RyKSA9PiB2aWV3LmVkaXRvci5yZXBsYWNlUmFuZ2Uoc3RyLCB2aWV3LmVkaXRvci5nZXRDdXJzb3IoKSkpLm9wZW4oKTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICBhc3luYyBsb2FkU2V0dGluZ3MoKSB7XHJcbiAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xyXG4gICAgYXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKVxyXG4gIH1cclxuXHJcbiAgLy8gUnVuIG9uY2Ugd2hlbiBwbHVnaW4gaXMgbG9hZGVkXHJcbiAgYXN5bmMgb25sb2FkKCkge1xyXG4gICAgLy8gSGFuZGxlIHNldHRpbmdzXHJcbiAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xyXG4gICAgdGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBTZXR0aW5nc1RhYih0aGlzLmFwcCwgdGhpcykpXHJcblxyXG4gICAgLy8gQWRkIGljb24gdG8gaW5zZXJ0IGxpbmsgXHJcbiAgICAvLyB0aGlzLmFkZFJpYmJvbkljb24oXCJsaW5rXCIsIFwiSW5zZXJ0IGJpYmxlIGxpbmtcIiwgKGV2dDogTW91c2VFdmVudCkgPT4gdGhpcy5vcGVuQ29weU1vZGFsKCkpO1xyXG5cclxuICAgIC8vIENvbW1hbmQgdG8gaW5zZXJ0IGxpbmsgKG9ubHkgYXZhaWxhYmxlIGluIGVkaXRvciBtb2RlKVxyXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcclxuICAgICAgaWQ6ICdpbnNlcnQtYmlibGUtbGluaycsIC8vIElEIGxlZnQgdG8gcHJlc2VydmUgdXNlcidzIGtleSBtYXBwaW5nc1xyXG4gICAgICBuYW1lOiBcIkNvcHkgQmlibGUgdmVyc2VzXCIsXHJcbiAgICAgIGVkaXRvckNhbGxiYWNrOiB0aGlzLm9wZW5Db3B5TW9kYWxcclxuICAgIH0pXHJcblxyXG4gICAgLy8gQ29tbWFuZCB0byBpbnNlcnQgbGluayAob25seSBhdmFpbGFibGUgaW4gZWRpdG9yIG1vZGUpXHJcbiAgICB0aGlzLmFkZENvbW1hbmQoe1xyXG4gICAgICBpZDogJ2luc2VydC1iaWJsZS1saW5rLW9ic2lkaWFuLWxpbmsnLFxyXG4gICAgICBuYW1lOiBcIkNyZWF0ZSBPYnNpZGlhbiBsaW5rcyB0byBCaWJsZSB2ZXJzZXNcIixcclxuICAgICAgZWRpdG9yQ2FsbGJhY2s6IHRoaXMub3Blbk9ic2lkaWFuTGlua01vZGFsXHJcbiAgICB9KVxyXG4gIH1cclxufVxyXG4iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCwgU2V0dGluZyB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQgeyBnZXRUZXh0T2ZWZXJzZXMgfSBmcm9tIFwiLi4vdXRpbHMvY29udmVydC1saW5rXCI7XHJcbmltcG9ydCB7IFBsdWdpblNldHRpbmdzIH0gZnJvbSBcIi4uL21haW5cIjtcclxuXHJcbi8qKlxyXG4gKiBBc3luYyBmdW5jdGlvbiBmb3IgZmV0Y2hpbmcgcHJldmlldyBcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNldFByZXZpZXdUZXh0KHByZXZpZXdFbDogSFRNTFRleHRBcmVhRWxlbWVudCwgdXNlcklucHV0OiBzdHJpbmcsIHBsdWdpblNldHRpbmdzOiBQbHVnaW5TZXR0aW5ncykge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCBnZXRUZXh0T2ZWZXJzZXModGhpcy5hcHAsIHVzZXJJbnB1dCwgcGx1Z2luU2V0dGluZ3MsIGZhbHNlKTtcclxuICAgIHByZXZpZXdFbC5zZXRUZXh0KHJlcyk7XHJcbiAgfVxyXG4gIGNhdGNoIHtcclxuICAgIHJldHVybjtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBNb2RhbCB0aGF0IGxldHMgeW91IGluc2VydCBiaWJsZSByZWZlcmVuY2UgYnkgY29weWluZyB0ZXh0IG9mIGdpdmVuIHZlcnNlc1xyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29weVZlcnNlTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XHJcbiAgdXNlcklucHV0OiBzdHJpbmdcclxuICBvblN1Ym1pdDogKHJlc3VsdDogc3RyaW5nKSA9PiB2b2lkXHJcbiAgcGx1Z2luU2V0dGluZ3M6IFBsdWdpblNldHRpbmdzO1xyXG5cclxuICBoYW5kbGVJbnB1dCA9IGFzeW5jICgpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGdldFRleHRPZlZlcnNlcyh0aGlzLmFwcCwgdGhpcy51c2VySW5wdXQsIHRoaXMucGx1Z2luU2V0dGluZ3MpO1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIHRoaXMub25TdWJtaXQocmVzKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnIpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHNldHRpbmdzOiBQbHVnaW5TZXR0aW5ncywgb25TdWJtaXQ6IChyZXN1bHQ6IHN0cmluZykgPT4gdm9pZCkge1xyXG4gICAgc3VwZXIoYXBwKTtcclxuICAgIHRoaXMub25TdWJtaXQgPSBvblN1Ym1pdDtcclxuICAgIHRoaXMucGx1Z2luU2V0dGluZ3MgPSBzZXR0aW5ncztcclxuICB9XHJcblxyXG5cclxuICBvbk9wZW4oKSB7XHJcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgIGxldCBwcmV2aWV3RWw6IEhUTUxUZXh0QXJlYUVsZW1lbnQ7XHJcblxyXG4gICAgLy8gQWRkIGhlYWRpbmcgXHJcbiAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJoM1wiLCB7IHRleHQ6IFwiQ29weSB2ZXJzZSBieSBiaWJsZSByZWZlcmVuY2VcIiB9KTtcclxuXHJcbiAgICAvLyBBZGQgVGV4dGJveCBmb3IgcmVmZXJlbmNlXHJcbiAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcbiAgICAgIC5zZXROYW1lKFwiSW5zZXJ0IHJlZmVyZW5jZVwiKVxyXG4gICAgICAuYWRkVGV4dCgodGV4dCkgPT4gdGV4dC5vbkNoYW5nZSgodmFsdWUpID0+IHtcclxuICAgICAgICB0aGlzLnVzZXJJbnB1dCA9IHZhbHVlO1xyXG4gICAgICAgIHNldFByZXZpZXdUZXh0KHByZXZpZXdFbCwgdGhpcy51c2VySW5wdXQsIHRoaXMucGx1Z2luU2V0dGluZ3MpO1xyXG4gICAgICB9KVxyXG4gICAgICAgIC5pbnB1dEVsLmZvY3VzKCkpOyAvLyBTZXRzIGZvY3VzIHRvIGlucHV0IGZpZWxkXHJcblxyXG4gICAgY29udGVudEVsLmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIlByZXZpZXdcIiB9KTtcclxuICAgIHByZXZpZXdFbCA9IGNvbnRlbnRFbC5jcmVhdGVFbChcInRleHRhcmVhXCIsIHsgY2xzOiAnY29weS1wcmV2aWV3JywgYXR0cjogeyByZWFkb25seTogdHJ1ZSB9IH0pO1xyXG5cclxuXHJcbiAgICAvLyBBZGQgYnV0dG9uIGZvciBzdWJtaXQvZXhpdFxyXG4gICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxyXG4gICAgICAuYWRkQnV0dG9uKChidG4pID0+IHtcclxuICAgICAgICBidG5cclxuICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiTGlua1wiKVxyXG4gICAgICAgICAgLnNldEN0YSgpXHJcbiAgICAgICAgICAub25DbGljayh0aGlzLmhhbmRsZUlucHV0KVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAvLyBBbGxvdyB1c2VyIHRvIGV4aXQgdXNpbmcgRW50ZXIga2V5XHJcbiAgICBjb250ZW50RWwub25rZXlkb3duID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgIGlmIChldmVudC5rZXkgPT09IFwiRW50ZXJcIikge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVJbnB1dCgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvbkNsb3NlKCkge1xyXG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICB9XHJcbn1cclxuXHJcbiIsICJpbXBvcnQgeyBBcHAsIEhlYWRpbmdDYWNoZSwgTm90aWNlLCBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQgeyBib29rQW5kQ2hhcHRlclJlZ2V4Rm9yT0JTSywgbXVsdGlwbGVDaGFwdGVycywgbXVsdGlwbGVWZXJzZXNSZWdFeCwgb25lVmVyc2VSZWdFeCB9IGZyb20gXCIuL3JlZ2V4ZXNcIjtcclxuaW1wb3J0IHsgUGx1Z2luU2V0dGluZ3MgfSBmcm9tIFwiLi4vbWFpblwiO1xyXG5pbXBvcnQgeyBMaW5rVHlwZSB9IGZyb20gXCJzcmMvbW9kYWxzL2xpbmstdmVyc2UtbW9kYWxcIjtcclxuXHJcbi8qKlxyXG4gKiBDb252ZXJ0cyBiaWJsaWNhbCByZWZlcmVuY2UgdG8gbGlua3MgdG8gZ2l2ZW4gdmVyc2VzIG9yIGJvb2tzIFxyXG4gKiBAcGFyYW0gYXBwIEFwcCBpbnN0YW5jZVxyXG4gKiBAcGFyYW0gdXNlcklucHV0IFVzZXIgSW5wdXQgKGxpbmsgdG8gdmVyc2UpXHJcbiAqIEBwYXJhbSBsaW5rVHlwZSBUeXBlIG9mIGxpbmsgdGhhdCBzaG91bGQgYmUgdXNlZFxyXG4gKiBAcGFyYW0gdXNlTmV3TGluZSBXaGV0aGVyIG9yIG5vdCBzaG91bGQgZWFjaCBsaW5rIGJlIG9uIG5ldyBsaW5lXHJcbiAqIEByZXR1cm5zIFN0cmluZyB3aXRoIHF1b3RlIG9mIGxpbmtlZCB2ZXJzZXMuIElmIGNvbnZlcnRpbmcgd2FzIG5vdCBzdWNjZXNzZnVsLCByZXR1cm5zIGVtcHR5IHN0cmluZy5cclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRMaW5rcyhhcHA6IEFwcCwgdXNlcklucHV0OiBzdHJpbmcsIGxpbmtUeXBlOiBMaW5rVHlwZSwgdXNlTmV3TGluZTogYm9vbGVhbiwgc2V0dGluZ3M6IFBsdWdpblNldHRpbmdzKSB7XHJcbiAgaWYgKG11bHRpcGxlQ2hhcHRlcnMudGVzdCh1c2VySW5wdXQpKSB7XHJcbiAgICByZXR1cm4gZ2V0TGlua3NGb3JCb29rcyhhcHAsIHVzZXJJbnB1dCwgbGlua1R5cGUsIHVzZU5ld0xpbmUsIHNldHRpbmdzKTtcclxuICB9XHJcbiAgZWxzZSB7XHJcbiAgICByZXR1cm4gZ2V0TGlua3NGb3JWZXJzZXMoYXBwLCB1c2VySW5wdXQsIGxpbmtUeXBlLCB1c2VOZXdMaW5lLCBzZXR0aW5ncyk7XHJcbiAgfVxyXG5cclxuXHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGdldExpbmtzRm9yVmVyc2VzKGFwcDogQXBwLCB1c2VySW5wdXQ6IHN0cmluZywgbGlua1R5cGU6IExpbmtUeXBlLCB1c2VOZXdMaW5lOiBib29sZWFuLCBzZXR0aW5nczogUGx1Z2luU2V0dGluZ3MpIHtcclxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWNvbnN0XHJcbiAgbGV0IHsgYm9va0FuZENoYXB0ZXIsIGJlZ2luVmVyc2UsIGVuZFZlcnNlIH0gPSBwYXJzZVVzZXJWZXJzZUlucHV0KHVzZXJJbnB1dCk7XHJcbiAgYm9va0FuZENoYXB0ZXIgPSBjYXBpdGFsaXplKGJvb2tBbmRDaGFwdGVyKSAvLyBGb3Igb3V0cHV0IGNvbnNpc3RlbmN5XHJcbiAgaWYgKHNldHRpbmdzLnZlcmlmeUZpbGVzV2hlbkxpbmtpbmcpIHtcclxuICAgIGNvbnN0IHsgZmlsZU5hbWUsIHRGaWxlIH0gPSBnZXRGaWxlRnJvbUJvb2tBbmRDaGFwdGVyKGFwcCwgYm9va0FuZENoYXB0ZXIpO1xyXG4gICAgaWYgKCF0RmlsZSkge1xyXG4gICAgICBuZXcgTm90aWNlKGBGaWxlIFwiJHtmaWxlTmFtZX1cIiBkb2VzIG5vdCBleGlzdCBhbmQgdmVyaWZ5IGZpbGVzIGlzIHNldCB0byB0cnVlYCk7XHJcbiAgICAgIHRocm93IGBGaWxlICR7ZmlsZU5hbWV9IGRvZXMgbm90IGV4aXN0LCB2ZXJpZnkgZmlsZXMgPSB0cnVlYDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGlmIChiZWdpblZlcnNlID4gZW5kVmVyc2UpIHtcclxuICAgIG5ldyBOb3RpY2UoXCJCZWdpbiB2ZXJzZSBpcyBiaWdnZXIgdGhhbiBlbmQgdmVyc2VcIilcclxuICAgIHRocm93IFwiQmVnaW4gdmVyc2UgaXMgYmlnZ2VyIHRoYW4gZW5kIHZlcnNlXCJcclxuICB9XHJcblxyXG4gIGxldCByZXMgPSBcIlwiO1xyXG4gIGNvbnN0IGJlZ2lubmluZyA9IGxpbmtUeXBlID09PSBMaW5rVHlwZS5FbWJlZGRlZCA/IFwiIVwiIDogXCJcIjtcclxuICBjb25zdCBlbmRpbmcgPSBsaW5rVHlwZSA9PT0gTGlua1R5cGUuSW52aXNpYmxlID8gXCJ8XCIgOiBcIlwiO1xyXG4gIGZvciAobGV0IGkgPSBiZWdpblZlcnNlOyBpIDw9IGVuZFZlcnNlOyBpKyspIHtcclxuICAgIHJlcyArPSBgJHtiZWdpbm5pbmd9W1ske2Jvb2tBbmRDaGFwdGVyfSR7c2V0dGluZ3MubGlua1NlcGFyYXRvcn0ke3NldHRpbmdzLnZlcnNlUHJlZml4fSR7aX0ke2VuZGluZ31dXWBcclxuICAgIGlmICh1c2VOZXdMaW5lKSB7XHJcbiAgICAgIHJlcyArPSAnXFxuJ1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gcmVzO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBnZXRMaW5rc0ZvckJvb2tzKGFwcDogQXBwLCB1c2VySW5wdXQ6IHN0cmluZywgbGlua1R5cGU6IExpbmtUeXBlLCB1c2VOZXdMaW5lOiBib29sZWFuLCBzZXR0aW5nczogUGx1Z2luU2V0dGluZ3MpIHtcclxuICBjb25zdCB7IGJvb2ssIGZpcnN0Q2hhcHRlciwgbGFzdENoYXB0ZXIgfSA9IHBhcnNlVXNlckJvb2tJbnB1dCh1c2VySW5wdXQpO1xyXG4gIGlmIChmaXJzdENoYXB0ZXIgPiBsYXN0Q2hhcHRlcikge1xyXG4gICAgbmV3IE5vdGljZShcIkJlZ2luIGNoYXB0ZXIgaXMgYmlnZ2VyIHRoYW4gZW5kIGNoYXB0ZXJcIilcclxuICAgIHRocm93IFwiQmVnaW4gY2hhcHRlciBpcyBiaWdnZXIgdGhhbiBlbmQgY2hhcHRlclwiXHJcbiAgfVxyXG5cclxuICBsZXQgcmVzID0gXCJcIjtcclxuICBmb3IgKGxldCBpID0gZmlyc3RDaGFwdGVyOyBpIDw9IGxhc3RDaGFwdGVyOyBpKyspIHtcclxuICAgIHJlcyArPSBgW1ske2Jvb2t9ICR7aX1dXWBcclxuICAgIGlmICh1c2VOZXdMaW5lKSB7XHJcbiAgICAgIHJlcyArPSAnXFxuJ1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gcmVzO1xyXG59XHJcblxyXG4vKipcclxuICogQ29udmVydHMgYmlibGljYWwgcmVmZXJlbmNlIHRvIHRleHQgb2YgZ2l2ZW4gdmVyc2VzXHJcbiAqIEBwYXJhbSBhcHAgQXBwIGluc3RhbmNlXHJcbiAqIEBwYXJhbSB1c2VySW5wdXQgVXNlciBJbnB1dCAobGluayB0byB2ZXJzZSlcclxuICogQHJldHVybnMgU3RyaW5nIHdpdGggcXVvdGUgb2YgbGlua2VkIHZlcnNlcy4gSWYgY29udmVydGluZyB3YXMgbm90IHN1Y2Nlc3NmdWwsIHJldHVybnMgZW1wdHkgc3RyaW5nLlxyXG4gKiBAdmVyYm9zZSBEZXRlcm1pbmVzIGlmIE5vdGljZXMgd2lsbCBiZSBzaG93biBvciBub3RcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRUZXh0T2ZWZXJzZXMoYXBwOiBBcHAsIHVzZXJJbnB1dDogc3RyaW5nLCBzZXR0aW5nczogUGx1Z2luU2V0dGluZ3MsIHZlcmJvc2UgPSB0cnVlKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuXHJcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1jb25zdFxyXG4gIGxldCB7IGJvb2tBbmRDaGFwdGVyLCBiZWdpblZlcnNlLCBlbmRWZXJzZSB9ID0gcGFyc2VVc2VyVmVyc2VJbnB1dCh1c2VySW5wdXQsIHZlcmJvc2UpO1xyXG4gIGJvb2tBbmRDaGFwdGVyID0gY2FwaXRhbGl6ZShib29rQW5kQ2hhcHRlcikgLy8gRm9yIG91dHB1dCBjb25zaXN0ZW5jeVxyXG4gIGNvbnN0IHsgZmlsZU5hbWUsIHRGaWxlIH0gPSBnZXRGaWxlRnJvbUJvb2tBbmRDaGFwdGVyKGFwcCwgYm9va0FuZENoYXB0ZXIpO1xyXG4gIGlmICh0RmlsZSkge1xyXG4gICAgcmV0dXJuIGF3YWl0IGNyZWF0ZUNvcHlPdXRwdXQoYXBwLCB0RmlsZSwgYm9va0FuZENoYXB0ZXIsIGZpbGVOYW1lLCBiZWdpblZlcnNlLCBlbmRWZXJzZSwgc2V0dGluZ3MsIHZlcmJvc2UpO1xyXG4gIH1cclxuICBlbHNlIHtcclxuICAgIGlmICh2ZXJib3NlKSB7XHJcbiAgICAgIG5ldyBOb3RpY2UoYEZpbGUgJHtib29rQW5kQ2hhcHRlcn0gbm90IGZvdW5kYCk7XHJcbiAgICB9XHJcbiAgICB0aHJvdyBcIkZpbGUgbm90IGZvdW5kXCJcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldEZpbGVGcm9tQm9va0FuZENoYXB0ZXIoYXBwOiBBcHAsIGJvb2tBbmRDaGFwdGVyOiBzdHJpbmcpIHtcclxuICBsZXQgZmlsZU5hbWUgPSBib29rQW5kQ2hhcHRlcjtcclxuICBsZXQgdEZpbGUgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdChmaWxlTmFtZSwgXCIvXCIpXHJcbiAgaWYgKCF0RmlsZSkgeyAvLyBoYW5kbGUgXCJCaWJsZSBzdHVkeSBraXRcIiBmaWxlIG5hbWluZywgZWcuIEdlbi0wMSBpbnN0ZWFkIG9mIEdlbiAxXHJcbiAgICBmaWxlTmFtZSA9IHRyeUNvbnZlcnRUb09CU0tGaWxlTmFtZShmaWxlTmFtZSk7XHJcbiAgICB0RmlsZSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KGZpbGVOYW1lLCBcIi9cIik7XHJcbiAgfVxyXG4gIHJldHVybiB7IGZpbGVOYW1lLCB0RmlsZSB9O1xyXG59XHJcblxyXG4vKipcclxuICogUGFyc2VzIGlucHV0IGZyb20gdXNlciwgZXhwZWN0aW5nIGNoYXB0ZXIgYW5kIHZlcnNlc1xyXG4gKiBAcGFyYW0gdXNlcklucHV0IFxyXG4gKi9cclxuZnVuY3Rpb24gcGFyc2VVc2VyVmVyc2VJbnB1dCh1c2VySW5wdXQ6IHN0cmluZywgdmVyYm9zZSA9IHRydWUpIHtcclxuICBsZXQgYm9va0FuZENoYXB0ZXI7XHJcbiAgbGV0IGJlZ2luVmVyc2U7XHJcbiAgbGV0IGVuZFZlcnNlO1xyXG5cclxuICBzd2l0Y2ggKHRydWUpIHtcclxuICAgIGNhc2Ugb25lVmVyc2VSZWdFeC50ZXN0KHVzZXJJbnB1dCk6IHsgLy8gb25lIHZlcnNlXHJcbiAgICAgIGNvbnN0IFssIG1hdGNoZWRDaGFwdGVyLCBtYXRjaGVkVmVyc2VdID0gdXNlcklucHV0Lm1hdGNoKG9uZVZlcnNlUmVnRXgpXHJcbiAgICAgIGJvb2tBbmRDaGFwdGVyID0gbWF0Y2hlZENoYXB0ZXI7XHJcbiAgICAgIGJlZ2luVmVyc2UgPSBOdW1iZXIobWF0Y2hlZFZlcnNlKTtcclxuICAgICAgZW5kVmVyc2UgPSBOdW1iZXIobWF0Y2hlZFZlcnNlKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICBjYXNlIG11bHRpcGxlVmVyc2VzUmVnRXgudGVzdCh1c2VySW5wdXQpOiB7IC8vIG11bHRpcGxlIHZlcnNlcywgb25lIGNoYXB0ZXJcclxuICAgICAgY29uc3QgWywgbWF0Y2hlZENoYXB0ZXIsIG1hdGNoZWRCZWdpblZlcnNlLCBtYXRjaGVkRW5kVmVyc2VdID0gdXNlcklucHV0Lm1hdGNoKG11bHRpcGxlVmVyc2VzUmVnRXgpXHJcbiAgICAgIGJvb2tBbmRDaGFwdGVyID0gbWF0Y2hlZENoYXB0ZXI7XHJcbiAgICAgIGJlZ2luVmVyc2UgPSBOdW1iZXIobWF0Y2hlZEJlZ2luVmVyc2UpO1xyXG4gICAgICBlbmRWZXJzZSA9IE51bWJlcihtYXRjaGVkRW5kVmVyc2UpO1xyXG4gICAgICBicmVhaztcclxuICAgIH1cclxuICAgIGRlZmF1bHQ6IHtcclxuICAgICAgaWYgKHZlcmJvc2UpIHtcclxuICAgICAgICBuZXcgTm90aWNlKGBXcm9uZyBmb3JtYXQgXCIke3VzZXJJbnB1dH1cImApO1xyXG4gICAgICB9XHJcbiAgICAgIHRocm93IFwiQ291bGQgbm90IHBhcnNlIHVzZXIgaW5wdXRcIlxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHsgYm9va0FuZENoYXB0ZXIsIGJlZ2luVmVyc2UsIGVuZFZlcnNlIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFBhcnNlcyBpbnB1dCBmcm9tIHVzZXIsIGV4cGVjdGluZyBtdWx0aXBsZSBjaGFwdGVycyBcclxuICogQHBhcmFtIHVzZXJJbnB1dCBcclxuICovXHJcbmZ1bmN0aW9uIHBhcnNlVXNlckJvb2tJbnB1dCh1c2VySW5wdXQ6IHN0cmluZykge1xyXG4gIGxldCBib29rO1xyXG4gIGxldCBmaXJzdENoYXB0ZXI7XHJcbiAgbGV0IGxhc3RDaGFwdGVyO1xyXG5cclxuICBzd2l0Y2ggKHRydWUpIHtcclxuICAgIGNhc2UgbXVsdGlwbGVDaGFwdGVycy50ZXN0KHVzZXJJbnB1dCk6IHsgLy8gb25lIHZlcnNlXHJcbiAgICAgIGNvbnN0IFssIG1hdGNoZWRCb29rLCBtYXRjaGVkRmlyc3RDaGFwdGVyLCBtYXRjaGVkTGFzdENoYXB0ZXJdID0gdXNlcklucHV0Lm1hdGNoKG11bHRpcGxlQ2hhcHRlcnMpXHJcbiAgICAgIGJvb2sgPSBtYXRjaGVkQm9vay50cmltKCk7XHJcbiAgICAgIGZpcnN0Q2hhcHRlciA9IE51bWJlcihtYXRjaGVkRmlyc3RDaGFwdGVyKTtcclxuICAgICAgbGFzdENoYXB0ZXIgPSBOdW1iZXIobWF0Y2hlZExhc3RDaGFwdGVyKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICBkZWZhdWx0OiB7XHJcbiAgICAgIG5ldyBOb3RpY2UoYFdyb25nIGZvcm1hdCBcIiR7dXNlcklucHV0fVwiYCk7XHJcbiAgICAgIHRocm93IFwiQ291bGQgbm90IHBhcnNlIHVzZXIgaW5wdXRcIlxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHsgYm9vaywgZmlyc3RDaGFwdGVyLCBsYXN0Q2hhcHRlciB9XHJcbn1cclxuXHJcbi8qXHJcbiAqIENhcGl0YWxpemVzIGdpdmVuIHN0cmluZyAoc2tpcHMgbGVhZGluZyB3aGl0ZXNwYWNlcyBhbmQgbnVtYmVycylcclxuICovXHJcbmZ1bmN0aW9uIGNhcGl0YWxpemUoc3RyOiBzdHJpbmcpIHtcclxuICBzdHIgPSBzdHIudG9Mb2NhbGVMb3dlckNhc2UoKTtcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xyXG4gICAgaWYgKC9bXlxcc1xcZC4sIy1dLy50ZXN0KHN0ci5jaGFyQXQoaSkpKSB7XHJcbiAgICAgIHJldHVybiBzdHIuc2xpY2UoMCwgaSkgKyBzdHIuY2hhckF0KGkpLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoaSArIDEpO1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gc3RyO1xyXG59XHJcblxyXG4vKipcclxuICogUmV0dXJucyB0ZXh0IG9mIGdpdmVuIHZlcnNlIHVzaW5nIGdpdmVuIGhlYWRpbmdzIGFuZCBsaW5lcy5cclxuICogQHBhcmFtIHZlcnNlTnVtYmVyIE51bWJlciBvZiBkZXNpcmVkIHZlcnNlLlxyXG4gKiBAcGFyYW0gaGVhZGluZ3MgTGlzdCBvZiBoZWFkaW5ncyB0aGF0IHNob3VsZCBiZSBzZWFyY2hlZC4gU2Vjb25kIGhlYWRpbmcgbXVzdCBjb3JyZXNwb25kIHRvIGZpcnN0IHZlcnNlLCB0aGlyZCBoZWFkaW5nIHRvIHNlY29uZCB2ZXJzZSBhbmQgc28gb24uIFxyXG4gKiBAcGFyYW0gbGluZXMgTGluZXMgb2YgZmlsZSBmcm9tIHdoaWNoIHZlcnNlIHRleHQgc2hvdWxkIGJlIHRha2VuLlxyXG4gKiBAcGFyYW0ga2VlcE5ld2xpbmVzIElmIHNldCB0byB0cnVlLCB0ZXh0IHdpbGwgY29udGFpbiBuZXdsaW5lcyBpZiBwcmVzZW50IGluIHNvdXJjZSwgaWYgc2V0IHRvIGZhbHNlLCBuZXdsaW5lcyB3aWxsIGJlIGNoYW5nZWQgdG8gc3BhY2VzXHJcbiAqIEBwYXJhbSBuZXdMaW5lUHJlZml4IFByZWZpeCBmb3IgZWFjaCBsaW5lIG9mIHZlcnNlLCBpZiB2ZXJzZSBpcyBtdWx0aWxpbmUgYW5kIGtlZXBOZXdMaW5lcyA9IHRydWVcclxuICogQHJldHVybnMgVGV4dCBvZiBnaXZlbiB2ZXJzZS5cclxuICovXHJcbmZ1bmN0aW9uIGdldFZlcnNlVGV4dCh2ZXJzZU51bWJlcjogbnVtYmVyLCBoZWFkaW5nczogSGVhZGluZ0NhY2hlW10sIGxpbmVzOiBzdHJpbmdbXSwga2VlcE5ld2xpbmVzOiBib29sZWFuLCBuZXdMaW5lUHJlZml4OiBzdHJpbmcpIHtcclxuICBpZiAodmVyc2VOdW1iZXIgPj0gaGVhZGluZ3MubGVuZ3RoKSB7IC8vIG91dCBvZiByYW5nZVxyXG4gICAgbmV3IE5vdGljZShcIlZlcnNlIG91dCBvZiByYW5nZSBmb3IgZ2l2ZW4gZmlsZVwiKVxyXG4gICAgdGhyb3cgYFZlcnNlTnVtYmVyICR7dmVyc2VOdW1iZXJ9IGlzIG91dCBvZiByYW5nZSBvZiBoZWFkaW5ncyB3aXRoIGxlbmd0aCAke2hlYWRpbmdzLmxlbmd0aH1gXHJcbiAgfVxyXG5cclxuICBjb25zdCBoZWFkaW5nTGluZSA9IGhlYWRpbmdzW3ZlcnNlTnVtYmVyXS5wb3NpdGlvbi5zdGFydC5saW5lO1xyXG4gIGlmIChoZWFkaW5nTGluZSArIDEgPj0gbGluZXMubGVuZ3RoKSB7IC8vIG91dCBvZiByYW5nZVxyXG4gICAgbmV3IE5vdGljZShcIkxvZ2ljYWwgZXJyb3IgLSBwbGVhc2UgY3JlYXRlIGlzc3VlIG9uIHBsdWdpbidzIEdpdEh1YiB3aXRoIHlvdXIgaW5wdXQgYW5kIHRoZSBmaWxlIHlvdSB3ZXJlIHJlZmVyZW5jaW5nLiBUaGFuayB5b3UhXCIpXHJcbiAgICB0aHJvdyBgSGVhZGluZ0xpbmUgJHtoZWFkaW5nTGluZSArIDF9IGlzIG91dCBvZiByYW5nZSBvZiBsaW5lcyB3aXRoIGxlbmd0aCAke2xpbmVzfWBcclxuICB9XHJcblxyXG4gIC8vIFRoaXMgcGFydCBpcyBuZWNlc3NhcnkgZm9yIHZlcnNlcyB0aGF0IHNwYW4gb3ZlciBtdWx0aXBsZSBsaW5lc1xyXG4gIGxldCBvdXRwdXQgPSBcIlwiO1xyXG4gIGxldCBsaW5lID0gXCJcIjtcclxuICBsZXQgaSA9IDE7XHJcbiAgbGV0IGlzRmlyc3QgPSB0cnVlO1xyXG5cclxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc3RhbnQtY29uZGl0aW9uXHJcbiAgd2hpbGUgKHRydWUpIHtcclxuICAgIGxpbmUgPSBsaW5lc1toZWFkaW5nTGluZSArIGldOyAvLyBnZXQgbmV4dCBsaW5lXHJcbiAgICBpZiAoLyMvLnRlc3QobGluZSkgfHwgKCFsaW5lICYmICFpc0ZpcnN0KSkge1xyXG4gICAgICBicmVhazsgLy8gaGVhZGluZyBsaW5lIChuZXh0IHZlcnNlKSBvciBlbXB0eSBsaW5lIGFmdGVyIHZlcnNlID0+IGRvIG5vdCBjb250aW51ZVxyXG4gICAgfVxyXG4gICAgaSsrO1xyXG4gICAgaWYgKGxpbmUpIHsgLy8gaWYgbGluZSBoYXMgY29udGVudCAoaXMgbm90IGVtcHR5IHN0cmluZylcclxuICAgICAgaWYgKCFpc0ZpcnN0KSB7IC8vIElmIGl0IGlzIG5vdCBmaXJzdCBsaW5lIG9mIHRoZSB2ZXJzZSwgYWRkIGRpdmlkZXJcclxuICAgICAgICBvdXRwdXQgKz0ga2VlcE5ld2xpbmVzID8gYFxcbiR7bmV3TGluZVByZWZpeH1gIDogXCIgXCI7XHJcbiAgICAgIH1cclxuICAgICAgaXNGaXJzdCA9IGZhbHNlO1xyXG4gICAgICBvdXRwdXQgKz0gbGluZTtcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIG91dHB1dDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFRyaWVzIHRvIGNvbnZlcnQgZmlsZSBuYW1lIHRvIE9ic2lkaWFuIFN0dWR5IEtpdCBmaWxlIG5hbWVcclxuICogQHBhcmFtIGJvb2tBbmRDaGFwdGVyIEZpbGUgbmFtZSB0aGF0IHNob3VsZCBiZSBjb252ZXJ0ZWQgXHJcbiAqIEByZXR1cm5zIGZpbGUgbmFtZSBpbiBPYnNpZGFpbiBTdHVkeSBLaXQgbmFtaW5nIHN5c3RlbSBcclxuICovXHJcbmZ1bmN0aW9uIHRyeUNvbnZlcnRUb09CU0tGaWxlTmFtZShib29rQW5kQ2hhcHRlcjogc3RyaW5nKSB7XHJcbiAgaWYgKGJvb2tBbmRDaGFwdGVyUmVnZXhGb3JPQlNLLnRlc3QoYm9va0FuZENoYXB0ZXIpKSB7IC8vIFZhbGlkIGNoYXB0ZXIgbmFtZVxyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1jb25zdFxyXG4gICAgbGV0IFssIGJvb2ssIG51bWJlcl0gPSBib29rQW5kQ2hhcHRlci5tYXRjaChib29rQW5kQ2hhcHRlclJlZ2V4Rm9yT0JTSyk7XHJcbiAgICBpZiAobnVtYmVyLmxlbmd0aCA9PSAxKSB7XHJcbiAgICAgIG51bWJlciA9IGAwJHtudW1iZXJ9YFxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGAke2Jvb2t9LSR7bnVtYmVyfWBcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZXBsYWNlcyBcIlxcblwiIHdpdGggbmV3bGluZSBjaGFyYWN0ZXIgaW4gZ2l2ZW4gc3RyaW5nICh3aGVuIHVzZXIgaW5wdXRzIFwiXFxuXCIgaW4gdGhlIHNldHRpbmdzIGl0IGlzIGF1dG9tYXRpY2FsbHkgY29udmVydGVkIHRvIFwiXFxcXG5cIiBhbmQgZG9lcyBub3Qgd29yayBhcyBuZXdsaW5lKVxyXG4gKi9cclxuZnVuY3Rpb24gcmVwbGFjZU5ld2xpbmUoaW5wdXQ6IHN0cmluZykge1xyXG4gIHJldHVybiBpbnB1dC5yZXBsYWNlKC9cXFxcbi9nLCBcIlxcblwiLCk7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUNvcHlPdXRwdXQoYXBwOiBBcHAsIHRGaWxlOiBURmlsZSwgdXNlckNoYXB0ZXJJbnB1dDogc3RyaW5nLCBmaWxlTmFtZTogc3RyaW5nLCBiZWdpblZlcnNlOiBudW1iZXIsIGVuZFZlcnNlOiBudW1iZXIsIHNldHRpbmdzOiBQbHVnaW5TZXR0aW5ncywgdmVyYm9zZTogQm9vbGVhbikge1xyXG4gIGNvbnN0IGZpbGUgPSBhcHAudmF1bHQucmVhZCh0RmlsZSlcclxuICBjb25zdCBsaW5lcyA9IChhd2FpdCBmaWxlKS5zcGxpdCgvXFxyP1xcbi8pXHJcbiAgY29uc3QgdmVyc2VIZWFkaW5nTGV2ZWwgPSBzZXR0aW5ncy52ZXJzZUhlYWRpbmdMZXZlbFxyXG4gIGNvbnN0IGhlYWRpbmdzID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKHRGaWxlKS5oZWFkaW5ncy5maWx0ZXIoaGVhZGluZyA9PiAhdmVyc2VIZWFkaW5nTGV2ZWwgfHwgaGVhZGluZy5sZXZlbCA9PT0gdmVyc2VIZWFkaW5nTGV2ZWwpXHJcbiAgY29uc3QgYmVnaW5WZXJzZU5vT2Zmc2V0ID0gYmVnaW5WZXJzZVxyXG4gIGNvbnN0IGVuZFZlcnNlTm9PZmZzZXQgPSBlbmRWZXJzZVxyXG4gIGJlZ2luVmVyc2UgKz0gc2V0dGluZ3MudmVyc2VPZmZzZXRcclxuICBlbmRWZXJzZSArPSBzZXR0aW5ncy52ZXJzZU9mZnNldFxyXG5cclxuXHJcbiAgaWYgKGJlZ2luVmVyc2UgPiBlbmRWZXJzZSkge1xyXG4gICAgaWYgKHZlcmJvc2UpIHtcclxuICAgICAgbmV3IE5vdGljZShcIkJlZ2luIHZlcnNlIGlzIGJpZ2dlciB0aGFuIGVuZCB2ZXJzZVwiKVxyXG4gICAgfVxyXG4gICAgdGhyb3cgXCJCZWdpbiB2ZXJzZSBpcyBiaWdnZXIgdGhhbiBlbmQgdmVyc2VcIlxyXG4gIH1cclxuICBpZiAoaGVhZGluZ3MubGVuZ3RoIDw9IGJlZ2luVmVyc2UpIHtcclxuICAgIGlmICh2ZXJib3NlKSB7XHJcbiAgICAgIG5ldyBOb3RpY2UoXCJCZWdpbiB2ZXJzZSBvdXQgb2YgcmFuZ2Ugb2YgY2hhcHRlclwiKVxyXG4gICAgfVxyXG4gICAgdGhyb3cgXCJCZWdpbiB2ZXJzZSBvdXQgb2YgcmFuZ2Ugb2YgY2hhcHRlclwiXHJcbiAgfVxyXG5cclxuICAvLyAxIC0gTGluayB0byB2ZXJzZXNcclxuICBsZXQgcmVzID0gc2V0dGluZ3MucHJlZml4O1xyXG4gIGNvbnN0IHBvc3RmaXggPSBzZXR0aW5ncy5wb3N0Zml4ID8gcmVwbGFjZU5ld2xpbmUoc2V0dGluZ3MucG9zdGZpeCkgOiBcIiBcIjtcclxuXHJcbiAgaWYgKGJlZ2luVmVyc2UgPT09IGVuZFZlcnNlKSB7XHJcbiAgICByZXMgKz0gYFtbJHtmaWxlTmFtZX0jJHtoZWFkaW5nc1tiZWdpblZlcnNlXS5oZWFkaW5nfXwke3VzZXJDaGFwdGVySW5wdXR9JHtzZXR0aW5ncy5vbmVWZXJzZU5vdGF0aW9ufSR7YmVnaW5WZXJzZU5vT2Zmc2V0fV1dJHtwb3N0Zml4fWAgLy8gW1tHZW4gMSMxfEdlbiAxLDEuMV1dXHJcbiAgfVxyXG4gIGVsc2UgaWYgKHNldHRpbmdzLmxpbmtFbmRWZXJzZSkge1xyXG4gICAgcmVzICs9IGBbWyR7ZmlsZU5hbWV9IyR7aGVhZGluZ3NbYmVnaW5WZXJzZV0uaGVhZGluZ318JHt1c2VyQ2hhcHRlcklucHV0fSR7c2V0dGluZ3MubXVsdGlwbGVWZXJzZXNOb3RhdGlvbn0ke2JlZ2luVmVyc2VOb09mZnNldH0tXV1gIC8vIFtbR2VuIDEjMXxHZW4gMSwxLV1dXHJcbiAgICByZXMgKz0gYFtbJHtmaWxlTmFtZX0jJHtoZWFkaW5nc1tlbmRWZXJzZV0uaGVhZGluZ318JHtlbmRWZXJzZU5vT2Zmc2V0fV1dJHtwb3N0Zml4fWA7IC8vIFtbR2VuIDEjM3wzXV1cclxuICB9XHJcbiAgZWxzZSB7XHJcbiAgICByZXMgKz0gYFtbJHtmaWxlTmFtZX0jJHtoZWFkaW5nc1tiZWdpblZlcnNlXS5oZWFkaW5nfXwke3VzZXJDaGFwdGVySW5wdXR9JHtzZXR0aW5ncy5tdWx0aXBsZVZlcnNlc05vdGF0aW9ufSR7YmVnaW5WZXJzZU5vT2Zmc2V0fS0ke2VuZFZlcnNlTm9PZmZzZXR9XV0ke3Bvc3RmaXh9YCAvLyBbW0dlbiAxIzF8R2VuIDEsMS0zXV1cclxuICB9XHJcblxyXG4gIC8vIDIgLSBUZXh0IG9mIHZlcnNlc1xyXG4gIGZvciAobGV0IGkgPSBiZWdpblZlcnNlOyBpIDw9IGVuZFZlcnNlOyBpKyspIHtcclxuICAgIGxldCB2ZXJzZVByZWZpeCA9IFwiXCI7XHJcbiAgICBsZXQgdmVyc2VQb3N0Zml4ID0gc2V0dGluZ3MuaW5zZXJ0U3BhY2UgPyBcIiBcIiA6IFwiXCI7XHJcbiAgICBpZiAoc2V0dGluZ3MuZWFjaFZlcnNlUHJlZml4KSB7XHJcbiAgICAgIHZlcnNlUHJlZml4ICs9IHNldHRpbmdzLmVhY2hWZXJzZVByZWZpeC5yZXBsYWNlKC97bn0vZywgKGkgLSBzZXR0aW5ncy52ZXJzZU9mZnNldCkudG9TdHJpbmcoKSk7XHJcbiAgICAgIHZlcnNlUHJlZml4ID0gdmVyc2VQcmVmaXgucmVwbGFjZSgve2Z9L2csIGAke2ZpbGVOYW1lfWApO1xyXG4gICAgfVxyXG4gICAgY29uc3QgdmVyc2VUZXh0ID0gZ2V0VmVyc2VUZXh0KGksIGhlYWRpbmdzLCBsaW5lcywgc2V0dGluZ3MubmV3TGluZXMsIHNldHRpbmdzLnByZWZpeCk7XHJcbiAgICBpZiAoc2V0dGluZ3MubmV3TGluZXMpIHtcclxuICAgICAgcmVzICs9IFwiXFxuXCIgKyBzZXR0aW5ncy5wcmVmaXggKyB2ZXJzZVByZWZpeCArIHZlcnNlVGV4dDtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICByZXMgKz0gdmVyc2VQcmVmaXggKyB2ZXJzZVRleHQgKyB2ZXJzZVBvc3RmaXg7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyAzIC0gSW52aXNpYmxlIGxpbmtzXHJcbiAgaWYgKGJlZ2luVmVyc2UgPT0gZW5kVmVyc2UgfHwgIXNldHRpbmdzLnVzZUludmlzaWJsZUxpbmtzKSByZXR1cm4gcmVzOyAvLyBObyBuZWVkIHRvIGFkZCBhbm90aGVyIGxpbmssIHdoZW4gb25seSBvbmUgdmVyc2UgaXMgYmVpbmcgbGlua2VkXHJcbiAgaWYgKHNldHRpbmdzLm5ld0xpbmVzKSB7XHJcbiAgICByZXMgKz0gYFxcbiR7c2V0dGluZ3MucHJlZml4fWA7XHJcbiAgfVxyXG4gIGZvciAobGV0IGkgPSBiZWdpblZlcnNlOyBpIDw9IGVuZFZlcnNlOyBpKyspIHtcclxuICAgIHJlcyArPSBgW1ske2ZpbGVOYW1lfSMke2hlYWRpbmdzW2ldLmhlYWRpbmd9fF1dYFxyXG4gIH1cclxuICByZXR1cm4gcmVzO1xyXG59XHJcbiIsICIvKlxyXG4qIFJlZ2V4ZXMgZm9yIHZlcnNlIHBhcnNpbmdcclxuKi9cclxuXHJcbi8vIExpbmsgdG8gb25lIHZlcnNlLCBmb3IgZXhhbXBsZSBcIkdlbiAxLjFcIiBvciBcIkdlbiAxOjFcIlxyXG5leHBvcnQgY29uc3Qgb25lVmVyc2VSZWdFeCA9IG5ldyBSZWdFeHAoLyhbXiw6I10rKVssIy46O11cXHMqKFxcZCspXFxzKiQvKTtcclxuXHJcbi8vIExpbmsgdG8gbXVsdGlwbGUgdmVyc2VzLCBmb3IgZXhhbXBsZSBcIkdlbiAxLDEtNVwiXHJcbmV4cG9ydCBjb25zdCBtdWx0aXBsZVZlcnNlc1JlZ0V4ID0gbmV3IFJlZ0V4cCgvKFteLDojXSspWywjLjo7XVxccyooXFxkKylcXHMqWy0uPV1cXHMqKFxcZCspXFxzKiQvKTtcclxuXHJcbi8vIEJvb2sgYW5kIGNoYXB0ZXIgc3RyaW5nICh1c2VkIGZvciBjb252ZXJ0aW5nIHRvIGJpYmxlIHN0dWR5IGtpdCBmaWxlIG5hbWVzKVxyXG5leHBvcnQgY29uc3QgYm9va0FuZENoYXB0ZXJSZWdleEZvck9CU0sgPSAvKFteLDojXSspXFxzKFxcZCspL1xyXG5cclxuLy8gTXVsdGlwbGUgY2hhcHRlcnMsIGZvciBleGFtcGxlIFwiR2VuIDEtM1wiXHJcbmV4cG9ydCBjb25zdCBtdWx0aXBsZUNoYXB0ZXJzID0gLyhcXGQqW15cXGQsOiNdKylcXHMqKFxcZCspXFxzKi1cXHMqKFxcZCspXFxzKiQvXHJcbiIsICJcclxuaW1wb3J0IHsgQXBwLCBNb2RhbCwgU2V0dGluZyB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQgeyBnZXRMaW5rcyB9IGZyb20gXCIuLi91dGlscy9jb252ZXJ0LWxpbmtcIjtcclxuaW1wb3J0IHsgUGx1Z2luU2V0dGluZ3MgfSBmcm9tIFwiLi4vbWFpblwiO1xyXG5cclxuZXhwb3J0IGVudW0gTGlua1R5cGUge1xyXG4gIEJhc2ljID0gXCJCYXNpY1wiLFxyXG4gIEVtYmVkZGVkID0gXCJFbWJlZGRlZFwiLFxyXG4gIEludmlzaWJsZSA9IFwiSW52aXNpYmxlXCIsXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBNb2RhbCB0aGF0IGxldHMgeW91IGluc2VydCBiaWJsZSByZWZlcmVuY2UgYnkgdXNpbmcgT2JzaWRpYW4gbGlua3MgXHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMaW5rVmVyc2VNb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuICB1c2VySW5wdXQ6IHN0cmluZztcclxuICBsaW5rVHlwZTogTGlua1R5cGU7XHJcbiAgdXNlTmV3TGluZTogYm9vbGVhbjtcclxuICBvblN1Ym1pdDogKHJlc3VsdDogc3RyaW5nKSA9PiB2b2lkO1xyXG4gIHBsdWdpblNldHRpbmdzOiBQbHVnaW5TZXR0aW5ncztcclxuXHJcbiAgaGFuZGxlSW5wdXQgPSBhc3luYyAoKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBnZXRMaW5rcyh0aGlzLmFwcCwgdGhpcy51c2VySW5wdXQsIHRoaXMubGlua1R5cGUsIHRoaXMudXNlTmV3TGluZSwgdGhpcy5wbHVnaW5TZXR0aW5ncylcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB0aGlzLm9uU3VibWl0KHJlcyk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyKSB7XHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHNldHRpbmdzOiBQbHVnaW5TZXR0aW5ncywgb25TdWJtaXQ6IChyZXN1bHQ6IHN0cmluZykgPT4gdm9pZCkge1xyXG4gICAgc3VwZXIoYXBwKTtcclxuICAgIHRoaXMub25TdWJtaXQgPSBvblN1Ym1pdDtcclxuICAgIHRoaXMucGx1Z2luU2V0dGluZ3MgPSBzZXR0aW5ncztcclxuICAgIHRoaXMubGlua1R5cGUgPSB0aGlzLnBsdWdpblNldHRpbmdzLmxpbmtUeXBlUHJlc2V0O1xyXG4gICAgdGhpcy51c2VOZXdMaW5lID0gdGhpcy5wbHVnaW5TZXR0aW5ncy5uZXdMaW5lUHJlc2V0O1xyXG4gIH1cclxuXHJcbiAgb25PcGVuKCkge1xyXG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcblxyXG4gICAgLy8gQWRkIGhlYWRpbmcgXHJcbiAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJoM1wiLCB7IHRleHQ6IFwiQ3JlYXRlIE9ic2lkaWFuIGxpbmtzIGZyb20gQmlibGUgcmVmZXJlbmNlXCIgfSk7XHJcblxyXG4gICAgLy8gQWRkIFRleHRib3ggZm9yIHJlZmVyZW5jZVxyXG4gICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxyXG4gICAgICAuc2V0TmFtZShcIkluc2VydCByZWZlcmVuY2VcIilcclxuICAgICAgLmFkZFRleHQoKHRleHQpID0+IHRleHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7IHRoaXMudXNlcklucHV0ID0gdmFsdWUgfSlcclxuICAgICAgICAuaW5wdXRFbC5mb2N1cygpKTsgLy8gU2V0cyBmb2N1cyB0byBpbnB1dCBmaWVsZFxyXG5cclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcbiAgICAgIC5zZXROYW1lKFwiTGluayB0eXBlXCIpXHJcbiAgICAgIC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcclxuICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oTGlua1R5cGUuQmFzaWMsIExpbmtUeXBlLkJhc2ljKVxyXG4gICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbihMaW5rVHlwZS5FbWJlZGRlZCwgTGlua1R5cGUuRW1iZWRkZWQpXHJcbiAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKExpbmtUeXBlLkludmlzaWJsZSwgTGlua1R5cGUuSW52aXNpYmxlKVxyXG4gICAgICAgIGRyb3Bkb3duLm9uQ2hhbmdlKCh2YWx1ZSkgPT4gdGhpcy5saW5rVHlwZSA9IHZhbHVlIGFzIExpbmtUeXBlKVxyXG4gICAgICAgIGRyb3Bkb3duLnNldFZhbHVlKHRoaXMucGx1Z2luU2V0dGluZ3MubGlua1R5cGVQcmVzZXQpXHJcbiAgICAgIH0pXHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxyXG4gICAgICAuc2V0TmFtZShcIkVhY2ggbGluayBvbiBuZXcgbGluZT9cIilcclxuICAgICAgLmFkZFRvZ2dsZSgodGdsKSA9PiB7XHJcbiAgICAgICAgdGdsLnNldFZhbHVlKHRoaXMucGx1Z2luU2V0dGluZ3MubmV3TGluZVByZXNldClcclxuICAgICAgICB0Z2wub25DaGFuZ2UodmFsID0+IHRoaXMudXNlTmV3TGluZSA9IHZhbCk7XHJcbiAgICAgIH1cclxuICAgICAgKVxyXG5cclxuXHJcbiAgICAvLyBBZGQgYnV0dG9uIGZvciBzdWJtaXQvZXhpdFxyXG4gICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxyXG4gICAgICAuYWRkQnV0dG9uKChidG4pID0+IHtcclxuICAgICAgICBidG5cclxuICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiTGlua1wiKVxyXG4gICAgICAgICAgLnNldEN0YSgpXHJcbiAgICAgICAgICAub25DbGljayh0aGlzLmhhbmRsZUlucHV0KVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAvLyBBbGxvdyB1c2VyIHRvIGV4aXQgdXNpbmcgRW50ZXIga2V5XHJcbiAgICBjb250ZW50RWwub25rZXlkb3duID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgIGlmIChldmVudC5rZXkgPT09IFwiRW50ZXJcIikge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVJbnB1dCgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvbkNsb3NlKCkge1xyXG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICB9XHJcbn1cclxuXHJcbiIsICJpbXBvcnQgeyBBcHAsIE5vdGljZSwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQgQmlibGVMaW5rZXJQbHVnaW4gZnJvbSBcIi4vbWFpblwiO1xyXG5pbXBvcnQgeyBMaW5rVHlwZSB9IGZyb20gXCIuL21vZGFscy9saW5rLXZlcnNlLW1vZGFsXCI7XHJcblxyXG4vKipcclxuICogU2V0dGluZ3MgZm9yIHBsdWdpblxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFNldHRpbmdzVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XHJcbiAgcGx1Z2luOiBCaWJsZUxpbmtlclBsdWdpbjtcclxuXHJcbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogQmlibGVMaW5rZXJQbHVnaW4pIHtcclxuICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcclxuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG4gIH1cclxuXHJcbiAgZGlzcGxheSgpIHtcclxuICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XHJcblxyXG4gICAgY29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldEhlYWRpbmcoKVxyXG4gICAgICAuc2V0TmFtZShcIkNvcHkgYmlibGUgdmVyc2VzIHNldHRpbmdzXCIpXHJcblxyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZShcIlZlcnNlIG9mZnNldFwiKVxyXG4gICAgICAuc2V0RGVzYygnQ2hhbmdlIHRoaXMgaWYgd3JvbmcgdmVyc2VzIGFyZSBiZWluZyBsaW5rZWQsIGUuZy4geW91IHdhbnQgXCJHZW4gMSwxLTNcIiBidXQgb3V0cHV0IGlzIHRleHQgZnJvbSB2ZXJzZXMgMi00IFx1MjE5MiBzZXQgdGhpcyB0byAtMScpXHJcbiAgICAgIC5hZGRUZXh0KChpbnB1dEJveCkgPT5cclxuICAgICAgICBpbnB1dEJveFxyXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnZlcnNlT2Zmc2V0LnRvU3RyaW5nKCkpXHJcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG51bWJlciA9IE51bWJlci5wYXJzZUludCh2YWx1ZSk7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gXCItXCIpIHJldHVybjtcclxuICAgICAgICAgICAgaWYgKE51bWJlci5pc05hTihudW1iZXIpKSB7XHJcbiAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkludmFsaWQgaW5wdXQsIHBsZWFzZSBpbnNlcnQgdmFsaWQgaW50ZWdlclwiKTtcclxuICAgICAgICAgICAgICBpbnB1dEJveC5zZXRWYWx1ZShcIlwiKTtcclxuICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudmVyc2VPZmZzZXQgPSBudW1iZXI7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgKVxyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZShcIlZlcnNlIGhlYWRpbmcgbGV2ZWxcIilcclxuICAgICAgLnNldERlc2MoJ0lmIHNldCwgb25seSBoZWFkaW5ncyBvZiBzcGVjaWZpZWQgbGV2ZWwgYXJlIGNvbnNpZGVyZWQgdmVyc2VzIChpZiBmaXJzdCBoZWFkaW5nIG9mIHRoaXMgbGV2ZWwgaXMgYWx3YXlzIGEgdmVyc2UsIGFsc28gc2V0IFwiVmVyc2Ugb2Zmc2V0XCIgdG8gLTEpJylcclxuICAgICAgLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xyXG4gICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbihcImFueVwiLCBcImFueVwiKVxyXG4gICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbihcIjZcIiwgXCIjIyMjIyNcIilcclxuICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oXCI1XCIsIFwiIyMjIyNcIilcclxuICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oXCI0XCIsIFwiIyMjI1wiKVxyXG4gICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbihcIjNcIiwgXCIjIyNcIilcclxuICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oXCIyXCIsIFwiIyNcIilcclxuICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oXCIxXCIsIFwiI1wiKVxyXG4gICAgICAgIGRyb3Bkb3duLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnZlcnNlSGVhZGluZ0xldmVsPy50b1N0cmluZygpID8/IFwiYW55XCIpXHJcbiAgICAgICAgZHJvcGRvd24ub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy52ZXJzZUhlYWRpbmdMZXZlbCA9IHZhbHVlID09PSBcImFueVwiID8gdW5kZWZpbmVkIDogTnVtYmVyKHZhbHVlKTtcclxuICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgIH0pXHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiTGluZSBwcmVmaXhcIilcclxuICAgICAgLnNldERlc2MoXCJTdHJpbmcgaW5zZXJ0ZWQgaW4gZnJvbnQgb2YgZXZlcnkgbGluZSwgZm9yIGV4YW1wbGUgJz4nIGZvciBxdW90ZS4gTm90ZTogSWYgeW91IHNldCAnUHV0IGVhY2ggdmVyc2Ugb24gYSBuZXcgbGluZT8nIHRvIHRydWUsIHRoZSBwcmVmaXggd2lsbCBiZSBpbnNlcnRlZCBpbiBmcm9udCBvZiBldmVyeSBsaW5lLlwiKVxyXG4gICAgICAuYWRkVGV4dCgoaW5wdXRCb3gpID0+XHJcbiAgICAgICAgaW5wdXRCb3hcclxuICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihcIkluc2VydCBwcmVmaXggaGVyZVwiKVxyXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnByZWZpeClcclxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucHJlZml4ID0gdmFsdWU7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgKVxyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZShcIkxpbmsgcG9zdGZpeFwiKVxyXG4gICAgICAuc2V0RGVzYyhcIlN0cmluZyBpbnNlcnRlZCBhZnRlciBiaWJsaWNhbCBsaW5rLCB5b3UgY2FuIHVzZSBcXFxcbiB0byBpbnNlcnQgbmV3bGluZS5cIilcclxuICAgICAgLmFkZFRleHQoKGlucHV0Qm94KSA9PlxyXG4gICAgICAgIGlucHV0Qm94XHJcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoXCJJbnNlcnQgcG9zdGZpeCBoZXJlXCIpXHJcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucG9zdGZpeClcclxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucG9zdGZpeCA9IHZhbHVlO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgIClcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJFYWNoIHZlcnNlIHByZWZpeFwiKVxyXG4gICAgICAuc2V0RGVzYyhcIlN0cmluZyBpbnNlcnRlZCBpbiBmcm9udCBvZiBldmVyeSBjb3BpZWQgdmVyc2UuIFlvdSBjYW4gdXNlIFxcXCJ7bn1cXFwiIHdoZXJlIHlvdSB3YW50IG51bWJlciBvZiBnaXZlbiB2ZXJzZSBpbnNlcnRlZCwgZm9yIGV4YW1wbGUgXFxcIioqe259KiogXFxcIiB3aWxsIG1ha2UgZWFjaCB2ZXJzZSBzdGFydCB3aXRoIGJvbGQgdmVyc2UgbnVtYmVyLiBZb3UgY2FuIGFsc28gdXNlIFxcXCJ7Zn1cXFwiIHRvIGluc2VydCBuYW1lIG9mIHRoZSBjb3JyZXNwb25kaW5nIGZpbGUgKGZvciBleGFtcGxlIHRvIGNyZWF0ZSBvYnNpZGlhbiBsaW5rcykuIExlYXZlIGVtcHR5IGZvciBubyBwcmVmaXguXCIpXHJcbiAgICAgIC5hZGRUZXh0KChpbnB1dEJveCkgPT5cclxuICAgICAgICBpbnB1dEJveFxyXG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFwiSW5zZXJ0IHByZWZpeCBoZXJlXCIpXHJcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZWFjaFZlcnNlUHJlZml4KVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lYWNoVmVyc2VQcmVmaXggPSB2YWx1ZTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICApXHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiTGluayB0byBsYXN0IHZlcnNlP1wiKVxyXG4gICAgICAuc2V0RGVzYyhcIlNob3VsZCBsYXN0IHZlcnNlIGJlIGxpbmtlZCBpbiB0aGUgdmlzaWJsZSBsaW5rIGJlZm9yZSB0ZXh0IG9mIHZlcnNlcz9cIilcclxuICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG4gICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmxpbmtFbmRWZXJzZSlcclxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubGlua0VuZFZlcnNlID0gdmFsdWU7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgKVxyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZShcIkFkZCBpbnZpc2libGUgbGlua3M/XCIpXHJcbiAgICAgIC5zZXREZXNjKFwiSW52aXNpYmxlIGxpbmtzIGFyZSBhZGRlZCB0byBlYWNoIHZlcnNlIHVzZWQgKHNvIHlvdSBjYW4gZmluZCB0aGUgY29ubmVjdGlvbnMgbGF0ZXIpLCB0aGV5IGFyZSBvbmx5IHZpc2libGUgaW4gc291cmNlIG1vZGUuXCIpXHJcbiAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cclxuICAgICAgICB0b2dnbGVcclxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy51c2VJbnZpc2libGVMaW5rcylcclxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudXNlSW52aXNpYmxlTGlua3MgPSB2YWx1ZTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICApXHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiUHV0IGVhY2ggdmVyc2Ugb24gYSBuZXcgbGluZT9cIilcclxuICAgICAgLnNldERlc2MoXCJFYWNoIHZlcnNlIGlzIGluc2VydGVkIG9uIGEgbmV3IGxpbmUgKHdpdGggTGluayBwcmVmaXgpLlwiKVxyXG4gICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcbiAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubmV3TGluZXMpXHJcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm5ld0xpbmVzID0gdmFsdWU7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgKVxyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZShcIk9uZSB2ZXJzZSBub3RhdGlvblwiKVxyXG4gICAgICAuc2V0RGVzYyhcIlRoaXMgaXMgdGhlIHN5bWJvbCB0aGF0IHdpbGwgYmUgdXNlZCBiZXR3ZWVuIGNoYXB0ZXIgbnVtYmVyIGFuZCB2ZXJzZSBudW1iZXIgd2hlbiBjb3B5aW5nIG9uZSB2ZXJzZS4gRm9yIGV4YW1wbGUgXFxcIi5cXFwiIFx1MjE5MiBHZW4gMS4xLlwiKVxyXG4gICAgICAuYWRkVGV4dCgoaW5wdXRCb3gpID0+XHJcbiAgICAgICAgaW5wdXRCb3hcclxuICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihcIkluc2VydCBub3RhdGlvbiBzeW1ib2wgaGVyZVwiKVxyXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm9uZVZlcnNlTm90YXRpb24pXHJcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm9uZVZlcnNlTm90YXRpb24gPSB2YWx1ZTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICApXHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiTXVsdGlwbGUgdmVyc2VzIG5vdGF0aW9uXCIpXHJcbiAgICAgIC5zZXREZXNjKFwiVGhpcyBpcyB0aGUgc3ltYm9sIHRoYXQgd2lsbCBiZSB1c2VkIGJldHdlZW4gY2hhcHRlciBudW1iZXIgYW5kIHZlcnNlIG51bWJlciB3aGVuIGNvcHlpbmcgbXVsdGlwbGUgdmVyc2VzLiBGb3IgZXhhbXBsZSBcXFwiLFxcXCIgXHUyMTkyIEdlbiAxLDEtMy5cIilcclxuICAgICAgLmFkZFRleHQoKGlucHV0Qm94KSA9PlxyXG4gICAgICAgIGlucHV0Qm94XHJcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoXCJJbnNlcnQgbm90YXRpb24gc3ltYm9sIGhlcmVcIilcclxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tdWx0aXBsZVZlcnNlc05vdGF0aW9uKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tdWx0aXBsZVZlcnNlc05vdGF0aW9uID0gdmFsdWU7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgKVxyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZShcIkluc2VydCBzcGFjZSBiZXR3ZWVuIHZlcnNlcz9cIilcclxuICAgICAgLnNldERlc2MoXCJTaG91bGQgc3BhY2UgYmUgaW5zZXJ0ZWQgYmV0d2VlbiB2ZXJzZXM/IChPbmx5IGFwcGxpZWQgd2hlbiBQdXQgZWFjaCB2ZXJzZSBvbiBhIG5ldyBsaW5lPyBpcyBzZSB0byBmYWxzZS4gVXNlZnVsIGZvciBsYW5ndWFnZXMgc3VjaCBhcyBDaGluZXNlLilcIilcclxuICAgICAgLnNldERpc2FibGVkKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5uZXdMaW5lcylcclxuICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG4gICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluc2VydFNwYWNlKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbnNlcnRTcGFjZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgIClcclxuXHJcbiAgICAvLyBMSU5LIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldEhlYWRpbmcoKVxyXG4gICAgICAuc2V0TmFtZShcIkNyZWF0ZSBvYnNpZGlhbiBsaW5rcyB0byBiaWJsZSB2ZXJzZXMgc2V0dGluZ3NcIilcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJMaW5rIHNlcGFyYXRvclwiKVxyXG4gICAgICAuc2V0RGVzYyhcIlRoaXMgaXMgdGhlIHNlcGFyYXRvciB0aGF0IHdpbGwgYmUgdXNlZCB3aGVuIGxpbmtpbmcsIGUuZy4gaWYgeW91IGVudGVyICcjJyBoZXJlLCBvdXRwdXQgd2lsbCBiZSBbW0dlbiAxIzFdXS4gSWYgeW91IGFyZSB1c2luZyBoZWFkaW5ncyB0byBtYXJrIHZlcnNlcywgdXNlICcjJy4gSWYgeW91IGFyZSB1c2luZyBibG9jayByZWZlcmVuY2VzLCB1c2UgJ14nLlwiKVxyXG4gICAgICAuYWRkVGV4dCgoaW5wdXRCb3gpID0+XHJcbiAgICAgICAgaW5wdXRCb3hcclxuICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihcIkluc2VydCBzZXBhcmF0b3IgaGVyZVwiKVxyXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmxpbmtTZXBhcmF0b3IpXHJcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmxpbmtTZXBhcmF0b3IgPSB2YWx1ZTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICApXHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiVmVyaWZ5IGZpbGVzP1wiKVxyXG4gICAgICAuc2V0RGVzYyhcIlZlcmlmeSBleGlzdGVuY2Ugb2YgZmlsZXMgeW91IGFyZSB0cnlpbmcgdG8gbGluaywgc28gdGhhdCB5b3UgYXJlIG5vdCBpbnNlcnRpbmcgd3JvbmcgcmVmZXJlbmNlcyBieSBtaXN0YWtlLlwiKVxyXG4gICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcbiAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudmVyaWZ5RmlsZXNXaGVuTGlua2luZylcclxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudmVyaWZ5RmlsZXNXaGVuTGlua2luZyA9IHZhbHVlO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgIClcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJWZXJzZSBwcmVmaXhcIilcclxuICAgICAgLnNldERlc2MoJ0ZpbGwgdGhpcyBpZiB5b3UgYXJlIHVzaW5nIHZlcnNlIHByZWZpeGVzIGluIHlvdXIgYmlibGUgZmlsZXMsIGUuZy4geW91IGhhdmUgXCJ2MVwiIGluIHlvdXIgZmlsZSBcdTIxOTIgc2V0IHRvIFwidlwiLicpXHJcbiAgICAgIC5hZGRUZXh0KChpbnB1dEJveCkgPT5cclxuICAgICAgICBpbnB1dEJveFxyXG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFwiSW5zZXJ0IHByZWZpeCBoZXJlXCIpXHJcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudmVyc2VQcmVmaXgpXHJcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnZlcnNlUHJlZml4ID0gdmFsdWU7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgKVxyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZShcIkxpbmsgdHlwZSBkZWZhdWx0IHZhbHVlXCIpXHJcbiAgICAgIC5zZXREZXNjKFwiVmFsdWUgdGhhdCB3aWxsIGJlIHNlbGVjdGVkIGJ5IGRlZmF1bHQgaW4gbGluayBtb2RhbC5cIilcclxuICAgICAgLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xyXG4gICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbihMaW5rVHlwZS5CYXNpYywgTGlua1R5cGUuQmFzaWMpXHJcbiAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKExpbmtUeXBlLkVtYmVkZGVkLCBMaW5rVHlwZS5FbWJlZGRlZClcclxuICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oTGlua1R5cGUuSW52aXNpYmxlLCBMaW5rVHlwZS5JbnZpc2libGUpXHJcbiAgICAgICAgZHJvcGRvd24uc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubGlua1R5cGVQcmVzZXQpXHJcbiAgICAgICAgZHJvcGRvd24ub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5saW5rVHlwZVByZXNldCA9IHZhbHVlIGFzIExpbmtUeXBlO1xyXG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgfSlcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJVc2UgbmV3IGxpbmVzIGRlZmF1bHQgdmFsdWVcIilcclxuICAgICAgLnNldERlc2MoXCJWYWx1ZSB0aGF0IHdpbGwgYmUgc2VsZWN0ZWQgYnkgZGVmYXVsdCBpbiBsaW5rIG1vZGFsLlwiKVxyXG4gICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcbiAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubmV3TGluZVByZXNldClcclxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubmV3TGluZVByZXNldCA9IHZhbHVlO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgIClcclxuXHJcbiAgfVxyXG59XHJcbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUEsdUJBQXFDOzs7QUNBckMsdUJBQW9DOzs7QUNBcEMsdUJBQWlEOzs7QUNLMUMsSUFBTSxnQkFBZ0IsSUFBSSxPQUFPO0FBR2pDLElBQU0sc0JBQXNCLElBQUksT0FBTztBQUd2QyxJQUFNLDZCQUE2QjtBQUduQyxJQUFNLG1CQUFtQjs7O0FDYmhDLHNCQUFvQztBQUk3QixJQUFLO0FBQUwsVUFBSyxXQUFMO0FBQ0wsdUJBQVE7QUFDUiwwQkFBVztBQUNYLDJCQUFZO0FBQUEsR0FIRjtBQVNaLG1DQUE0QyxzQkFBTTtBQUFBLEVBa0JoRCxZQUFZLEtBQVUsVUFBMEIsVUFBb0M7QUFDbEYsVUFBTTtBQVpSLHVCQUFjLE1BQVk7QUFDeEIsVUFBSTtBQUNGLGNBQU0sTUFBTSxNQUFNLFNBQVMsS0FBSyxLQUFLLEtBQUssV0FBVyxLQUFLLFVBQVUsS0FBSyxZQUFZLEtBQUs7QUFDMUYsYUFBSztBQUNMLGFBQUssU0FBUztBQUFBLGVBRVQsS0FBUDtBQUNFO0FBQUE7QUFBQTtBQU1GLFNBQUssV0FBVztBQUNoQixTQUFLLGlCQUFpQjtBQUN0QixTQUFLLFdBQVcsS0FBSyxlQUFlO0FBQ3BDLFNBQUssYUFBYSxLQUFLLGVBQWU7QUFBQTtBQUFBLEVBR3hDLFNBQVM7QUFDUCxVQUFNLEVBQUUsY0FBYztBQUd0QixjQUFVLFNBQVMsTUFBTSxFQUFFLE1B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
